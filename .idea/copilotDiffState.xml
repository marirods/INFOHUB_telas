<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/infohub_telas/telas/TelaProduto.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/infohub_telas/telas/TelaProduto.kt" />
              <option name="originalContent" value="package com.example.infohub_telas.telas&#10;&#10;import android.content.Context&#10;import androidx.compose.animation.animateColor&#10;import androidx.compose.animation.core.animateFloat&#10;import androidx.compose.animation.core.updateTransition&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.horizontalScroll&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.foundation.lazy.LazyRow&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.ui.graphics.vector.ImageVector&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.graphicsLayer&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextDecoration&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.navigation.NavController&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.infohub_telas.components.AnimatedScrollableBottomMenu&#10;import com.example.infohub_telas.components.rememberMenuVisibility&#10;import com.example.infohub_telas.ui.theme.InfoHub_telasTheme&#10;import com.example.infohub_telas.R&#10;import com.example.infohub_telas.navigation.Routes&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import com.example.infohub_telas.viewmodel.CarrinhoViewModel&#10;import com.example.infohub_telas.viewmodel.OperationUiState&#10;import android.widget.Toast&#10;import coil.compose.AsyncImage&#10;import coil.request.ImageRequest&#10;import com.example.infohub_telas.utils.AzureBlobUtils&#10;import com.example.infohub_telas.service.RetrofitFactory&#10;import com.example.infohub_telas.model.Produto&#10;import android.util.Log&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.launch&#10;import kotlinx.coroutines.withContext&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun TelaProduto(navController: NavController, id: String) {&#10;    val context = LocalContext.current&#10;    val prefs = context.getSharedPreferences(&quot;auth&quot;, Context.MODE_PRIVATE)&#10;    val token = prefs.getString(&quot;token&quot;, &quot;&quot;) ?: &quot;&quot;&#10;    val userId = prefs.getInt(&quot;user_id&quot;, 0)&#10;&#10;    val carrinhoViewModel: CarrinhoViewModel = viewModel()&#10;    val operationState by carrinhoViewModel.operationState.collectAsState()&#10;&#10;    // Estado para controlar rolagem e visibilidade do menu&#10;    val scrollState = rememberScrollState()&#10;    val isMenuVisible = scrollState.rememberMenuVisibility()&#10;&#10;    // Estados para carregar produto da API&#10;    var produto by remember { mutableStateOf&lt;Produto?&gt;(null) }&#10;    var isLoading by remember { mutableStateOf(true) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    val coroutineScope = rememberCoroutineScope()&#10;    val produtoApi = remember { RetrofitFactory().getInfoHub_ProdutoService() }&#10;&#10;    LaunchedEffect(operationState) {&#10;        when (val op = operationState) {&#10;            is OperationUiState.Success -&gt; {&#10;                Toast.makeText(context, op.message, Toast.LENGTH_SHORT).show()&#10;                carrinhoViewModel.resetOperationState()&#10;            }&#10;            is OperationUiState.Error -&gt; {&#10;                Toast.makeText(context, &quot;Erro: ${op.message}&quot;, Toast.LENGTH_LONG).show()&#10;                carrinhoViewModel.resetOperationState()&#10;            }&#10;            else -&gt; {}&#10;        }&#10;    }&#10;&#10;    // Buscar produto da API&#10;    LaunchedEffect(id) {&#10;        val idProduto = id.toIntOrNull()&#10;        if (idProduto == null) {&#10;            errorMessage = &quot;ID de produto inválido&quot;&#10;            isLoading = false&#10;            return@LaunchedEffect&#10;        }&#10;&#10;        Log.d(&quot;TelaProduto&quot;, &quot; Buscando produto com ID: $idProduto&quot;)&#10;        isLoading = true&#10;&#10;        coroutineScope.launch {&#10;            try {&#10;                val response = withContext(Dispatchers.IO) {&#10;                    produtoApi.buscarProdutoPorId(idProduto).execute()&#10;                }&#10;&#10;                if (response.isSuccessful) {&#10;                    produto = response.body()&#10;                    Log.d(&quot;TelaProduto&quot;, &quot;✅ Produto encontrado: ${produto?.nome}&quot;)&#10;                    Log.d(&quot;TelaProduto&quot;, &quot; Imagem do produto: ${produto?.imagem}&quot;)&#10;                } else {&#10;                    errorMessage = &quot;Erro ao carregar produto: ${response.code()}&quot;&#10;                    Log.e(&quot;TelaProduto&quot;, &quot;❌ Erro na API: ${response.code()}&quot;)&#10;                }&#10;            } catch (e: Exception) {&#10;                errorMessage = &quot;Erro de conexão: ${e.message}&quot;&#10;                Log.e(&quot;TelaProduto&quot;, &quot; Exceção ao buscar produto: ${e.message}&quot;, e)&#10;            } finally {&#10;                isLoading = false&#10;            }&#10;        }&#10;    }&#10;&#10;    // ID do produto vindo do parâmetro 'id' (converter para Int se possível)&#10;    val idProduto = id.toIntOrNull() ?: -1&#10;    // TODO: recuperar idEstabelecimento real associado ao produto&#10;    val idEstabelecimento = 1 // placeholder&#10;&#10;    fun adicionarAoCarrinho(quantidade: Int = 1) {&#10;        if (token.isBlank() || userId == 0) {&#10;            Toast.makeText(context, &quot;Faça login para adicionar ao carrinho&quot;, Toast.LENGTH_LONG).show()&#10;            return&#10;        }&#10;        if (idProduto == -1) {&#10;            Toast.makeText(context, &quot;Produto inválido&quot;, Toast.LENGTH_LONG).show()&#10;            return&#10;        }&#10;        carrinhoViewModel.adicionarItem(&#10;            token = token,&#10;            idUsuario = userId,&#10;            idProduto = idProduto,&#10;            idEstabelecimento = idEstabelecimento,&#10;            quantidade = quantidade&#10;        )&#10;    }&#10;&#10;    Scaffold(&#10;        topBar = { TopBarPromocao() }&#10;    ) { paddingValues -&gt;&#10;        Box(modifier = Modifier.fillMaxSize()) {&#10;            Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Color(0xFFF5F5F5))&#10;                .padding(paddingValues)&#10;                .verticalScroll(scrollState)&#10;                .padding(horizontal = 16.dp, vertical = 12.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            SearchBarPromocao()&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;            FilterChipsPromocao()&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;            if (isLoading) {&#10;                Column(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Center&#10;                ) {&#10;                    CircularProgressIndicator()&#10;                    Spacer(modifier = Modifier.height(16.dp))&#10;                    Text(&quot;Carregando produto...&quot;)&#10;                }&#10;            } else if (errorMessage != null) {&#10;                Column(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Center&#10;                ) {&#10;                    Text(&#10;                        text = errorMessage ?: &quot;Erro desconhecido&quot;,&#10;                        color = MaterialTheme.colorScheme.error,&#10;                        style = MaterialTheme.typography.bodyLarge&#10;                    )&#10;                }&#10;            } else if (produto != null) {&#10;                ProductCardPromocao(&#10;                    produto = produto!!,&#10;                    adicionarAoCarrinho = { adicionarAoCarrinho() },&#10;                    navController = navController,&#10;                    context = context,&#10;                    token = token,&#10;                    userId = userId,&#10;                    idProduto = idProduto,&#10;                    idEstabelecimento = idEstabelecimento,&#10;                    carrinhoViewModel = carrinhoViewModel&#10;                )&#10;            }&#10;            Spacer(modifier = Modifier.height(80.dp))&#10;        } // Fecha a Column&#10;&#10;        // Menu inferior animado&#10;        Box(modifier = Modifier.align(Alignment.BottomCenter)) {&#10;            AnimatedScrollableBottomMenu(&#10;                navController = navController,&#10;                isAdmin = false,&#10;                isVisible = isMenuVisible&#10;            )&#10;        }&#10;        } // Fecha o Box principal&#10;    } // Fecha o Scaffold&#10;} // Fecha a função TelaProduto&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun TopBarPromocao() {&#10;    TopAppBar(&#10;        title = { },&#10;        navigationIcon = {&#10;            IconButton(onClick = { /* TODO: Voltar */ }) {&#10;                Icon(&#10;                    painter = painterResource(id = R.drawable.sacola),&#10;                    contentDescription = &quot;Voltar&quot;,&#10;                    tint = Color.White,&#10;                    modifier = Modifier.size(28.dp)&#10;                )&#10;            }&#10;        },&#10;        colors = TopAppBarDefaults.topAppBarColors(&#10;            containerColor = Color(0xFFFFA726)&#10;        )&#10;    )&#10;}&#10;&#10;@Composable&#10;fun SearchBarPromocao() {&#10;    var text by remember { mutableStateOf(&quot;&quot;) }&#10;    OutlinedTextField(&#10;        value = text,&#10;        onValueChange = { text = it },&#10;        placeholder = { Text(&quot;Pesquisar&quot;, color = Color.Gray) },&#10;        leadingIcon = { Icon(Icons.Default.Search, contentDescription = null, tint = Color.Gray) },&#10;        trailingIcon = {&#10;            IconButton(onClick = { /* TODO: Ação de busca por voz */ }) {&#10;                Icon(painter = painterResource(id = R.drawable.microfone_loc), contentDescription = &quot;Busca por voz&quot;, tint = Color.Gray)&#10;            }&#10;        },&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(56.dp),&#10;        shape = RoundedCornerShape(30.dp)&#10;    )&#10;}&#10;&#10;@Composable&#10;fun FilterChipsPromocao() {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .horizontalScroll(rememberScrollState()),&#10;        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;    ) {&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Promoções&quot;, color = Color.White, fontWeight = FontWeight.Medium, fontSize = 13.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color(0xFFFFA726)&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Hortifrúti&quot;, color = Color(0xFFFFA726), fontWeight = FontWeight.Medium, fontSize = 13.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color.White&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Carne&quot;, color = Color(0xFFFFA726), fontWeight = FontWeight.Medium, fontSize = 13.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color.White&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Bebidas&quot;, color = Color(0xFFFFA726), fontWeight = FontWeight.Medium, fontSize = 12.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color.White&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProductCardPromocao(&#10;    produto: Produto,&#10;    adicionarAoCarrinho: () -&gt; Unit,&#10;    navController: NavController,&#10;    context: android.content.Context,&#10;    token: String,&#10;    userId: Int,&#10;    idProduto: Int,&#10;    idEstabelecimento: Int,&#10;    carrinhoViewModel: CarrinhoViewModel&#10;) {&#10;    // Obter URL da imagem do Azure&#10;    val imagemUrl = AzureBlobUtils.getImageUrl(produto.imagem)&#10;        ?: AzureBlobUtils.getPlaceholderImageUrl()&#10;&#10;    // Calcular desconto se houver promoção&#10;    val precoOriginal = produto.preco&#10;    val precoPromocional = produto.promocao?.precoPromocional ?: precoOriginal&#10;    val desconto = if (precoPromocional &lt; precoOriginal) {&#10;        ((precoOriginal - precoPromocional) / precoOriginal * 100).toInt()&#10;    } else {&#10;        0&#10;    }&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White),&#10;        elevation = CardDefaults.cardElevation(&#10;            defaultElevation = 4.dp&#10;        )&#10;    ) {&#10;        Column(&#10;            modifier = Modifier.padding(16.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            Box(modifier = Modifier.fillMaxWidth()) {&#10;                Surface(&#10;                    color = Color(0xFF4CAF50),&#10;                    shape = RoundedCornerShape(topStart = 8.dp, bottomEnd = 8.dp)&#10;                ) {&#10;                    Text(&#10;                        &quot;Oferta&quot;,&#10;                        color = Color.White,&#10;                        fontSize = 12.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        modifier = Modifier.padding(horizontal = 12.dp, vertical = 6.dp)&#10;                    )&#10;                }&#10;                IconButton(&#10;                    onClick = { /* TODO: Ação de favoritar */ },&#10;                    modifier = Modifier.align(Alignment.TopEnd)&#10;                ) {&#10;                    Icon(&#10;                        Icons.Default.FavoriteBorder,&#10;                        contentDescription = &quot;Favoritar&quot;,&#10;                        tint = Color(0xFFFFA726),&#10;                        modifier = Modifier.size(28.dp)&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Imagem do produto&#10;            Box(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(250.dp),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                AsyncImage(&#10;                    model = ImageRequest.Builder(context)&#10;                        .data(imagemUrl)&#10;                        .crossfade(true)&#10;                        .build(),&#10;                    contentDescription = produto.nome,&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(250.dp)&#10;                        .clip(RoundedCornerShape(12.dp)),&#10;                    contentScale = ContentScale.Crop&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Mostrar desconto e preço original apenas se houver promoção&#10;            if (desconto &gt; 0) {&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically,&#10;                    horizontalArrangement = Arrangement.Center&#10;                ) {&#10;                    Surface(&#10;                        color = Color(0xFFFFE0B2),&#10;                        shape = RoundedCornerShape(4.dp)&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;-$desconto%&quot;,&#10;                            modifier = Modifier.padding(horizontal = 8.dp, vertical = 4.dp),&#10;                            color = Color(0xFFFFA726),&#10;                            fontSize = 12.sp,&#10;                            fontWeight = FontWeight.Bold&#10;                        )&#10;                    }&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&#10;                        text = &quot;R$ %.2f&quot;.format(precoOriginal),&#10;                        color = Color.Gray,&#10;                        textDecoration = TextDecoration.LineThrough,&#10;                        fontSize = 14.sp&#10;                    )&#10;                }&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;            }&#10;&#10;            // Preço atual&#10;            Text(&#10;                &quot;R$ %.2f&quot;.format(precoPromocional),&#10;                fontSize = 32.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = if (desconto &gt; 0) Color(0xFF4CAF50) else Color(0xFFFFA726)&#10;            )&#10;&#10;            // Nome do produto&#10;            Text(&#10;                produto.nome,&#10;                color = Color.Gray,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Medium,&#10;                modifier = Modifier.padding(horizontal = 16.dp)&#10;            )&#10;&#10;            // Descrição do produto&#10;            if (!produto.descricao.isNullOrBlank()) {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                Text(&#10;                    produto.descricao,&#10;                    color = Color.Gray,&#10;                    fontSize = 13.sp,&#10;                    modifier = Modifier.padding(horizontal = 16.dp)&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(20.dp))&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceEvenly&#10;            ) {&#10;                // Botão Lista de Compras&#10;                Button(&#10;                    onClick = {&#10;                        // TODO: Implementar funcionalidade de Lista de Compras&#10;                        Toast.makeText(context, &quot;Lista de Compras - Em breve!&quot;, Toast.LENGTH_SHORT).show()&#10;                    },&#10;                    colors = ButtonDefaults.buttonColors(containerColor = Color(0xFFFFA726)),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    modifier = Modifier.size(70.dp, 48.dp)&#10;                ) {&#10;                    Icon(&#10;                        painter = painterResource(id = R.drawable.lista),&#10;                        contentDescription = &quot;Adicionar à lista&quot;,&#10;                        tint = Color.White,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;                // Botão Chat IA&#10;                Button(&#10;                    onClick = {&#10;                        navController.navigate(Routes.CHAT_PRECOS)&#10;                    },&#10;                    colors = ButtonDefaults.buttonColors(containerColor = Color(0xFFFFA726)),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    modifier = Modifier.size(70.dp, 48.dp)&#10;                ) {&#10;                    Icon(&#10;                        painter = painterResource(id = R.drawable.iabranca),&#10;                        contentDescription = &quot;Consultar IA&quot;,&#10;                        tint = Color.White,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;                // Botão Adicionar ao Carrinho&#10;                Button(&#10;                    onClick = { adicionarAoCarrinho() },&#10;                    colors = ButtonDefaults.buttonColors(containerColor = Color(0xFFFFA726)),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    modifier = Modifier.size(70.dp, 48.dp)&#10;                ) {&#10;                    Icon(&#10;                        painter = painterResource(id = R.drawable.sacola),&#10;                        contentDescription = &quot;Adicionar ao carrinho&quot;,&#10;                        tint = Color.White,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Botão Comprar Agora - Adiciona ao carrinho e navega&#10;            Button(&#10;                onClick = {&#10;                    if (token.isBlank() || userId == 0) {&#10;                        Toast.makeText(context, &quot;Faça login para comprar&quot;, Toast.LENGTH_LONG).show()&#10;                        return@Button&#10;                    }&#10;                    if (idProduto == -1) {&#10;                        Toast.makeText(context, &quot;Produto inválido&quot;, Toast.LENGTH_LONG).show()&#10;                        return@Button&#10;                    }&#10;                    // Adiciona ao carrinho e navega para o carrinho&#10;                    carrinhoViewModel.adicionarItem(&#10;                        token = token,&#10;                        idUsuario = userId,&#10;                        idProduto = idProduto,&#10;                        idEstabelecimento = idEstabelecimento,&#10;                        quantidade = 1&#10;                    )&#10;                    // Navega para o carrinho após adicionar&#10;                    navController.navigate(Routes.CARRINHO)&#10;                },&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(50.dp)&#10;                    .padding(horizontal = 32.dp),&#10;                colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF4CAF50)),&#10;                shape = RoundedCornerShape(12.dp)&#10;            ) {&#10;                Text(&#10;                    &quot;COMPRAR AGORA&quot;,&#10;                    color = Color.White,&#10;                    fontWeight = FontWeight.Bold,&#10;                    fontSize = 14.sp&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomBarPromocao() {&#10;    Surface(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        color = Color.Transparent&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 16.dp, vertical = 8.dp)&#10;        ) {&#10;            // Barra &quot;Ver carrinho&quot;&#10;            Surface(&#10;                color = Color(0xFFFFA726),&#10;                shape = RoundedCornerShape(topStart = 16.dp, topEnd = 16.dp),&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                Row(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(horizontal = 20.dp, vertical = 12.dp),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Row(verticalAlignment = Alignment.CenterVertically) {&#10;                        Icon(&#10;                            painter = painterResource(id = R.drawable.sacola),&#10;                            contentDescription = &quot;Carrinho&quot;,&#10;                            tint = Color.White,&#10;                            modifier = Modifier.size(20.dp)&#10;                        )&#10;                        Spacer(modifier = Modifier.width(10.dp))&#10;                        Text(&#10;                            text = &quot;Ver carrinho&quot;,&#10;                            color = Color.White,&#10;                            fontSize = 15.sp,&#10;                            fontWeight = FontWeight.Medium&#10;                        )&#10;                    }&#10;                    Text(&#10;                        text = &quot;R$ 0,00&quot;,&#10;                        color = Color.White,&#10;                        fontSize = 15.sp,&#10;                        fontWeight = FontWeight.Medium&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Barra de navegação&#10;            Surface(&#10;                color = Color.White,&#10;                shape = RoundedCornerShape(bottomStart = 16.dp, bottomEnd = 16.dp),&#10;                shadowElevation = 8.dp,&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                var selectedIndex by remember { mutableStateOf(1) }&#10;                val items = listOf(&#10;                    &quot;Início&quot; to R.drawable.inicio,&#10;                    &quot;Promoções&quot; to R.drawable.promocoes,&#10;                    &quot;Localização&quot; to R.drawable.local,&#10;                    &quot;InfoCash&quot; to R.drawable.dinheiro,&#10;                    &quot;Meu Perfil&quot; to R.drawable.perfil_icon&#10;                )&#10;&#10;                Row(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(vertical = 8.dp, horizontal = 8.dp),&#10;                    horizontalArrangement = Arrangement.SpaceAround,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    items.forEachIndexed { index, (label, icon) -&gt;&#10;                        BottomNavigationItemAnimated(&#10;                            label = label,&#10;                            icon = icon,&#10;                            selected = index == selectedIndex,&#10;                            onClick = { selectedIndex = index }&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomNavigationItemAnimated(&#10;    label: String,&#10;    icon: Int,&#10;    selected: Boolean,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    val transition = updateTransition(targetState = selected, label = &quot;navTransition&quot;)&#10;    val circleScale by transition.animateFloat(label = &quot;circleScale&quot;) { if (it) 1f else 0f }&#10;    val iconColor by transition.animateColor(label = &quot;iconColor&quot;) { isSelected -&gt;&#10;        if (isSelected) Color.White else Color(0xFFFFA726)&#10;    }&#10;&#10;    Column(&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        modifier = Modifier&#10;            .clickable { onClick() }&#10;            .padding(vertical = 4.dp)&#10;    ) {&#10;        Box(&#10;            contentAlignment = Alignment.Center,&#10;            modifier = Modifier.size(48.dp)&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .matchParentSize()&#10;                    .graphicsLayer {&#10;                        scaleX = circleScale&#10;                        scaleY = circleScale&#10;                    }&#10;                    .background(&#10;                        color = Color(0xFFFFA726),&#10;                        shape = CircleShape&#10;                    )&#10;            )&#10;            Icon(&#10;                painter = painterResource(id = icon),&#10;                contentDescription = label,&#10;                tint = iconColor,&#10;                modifier = Modifier.size(26.dp)&#10;            )&#10;        }&#10;        Text(&#10;            text = label,&#10;            fontSize = 11.sp,&#10;            fontWeight = if (selected) FontWeight.Bold else FontWeight.Normal,&#10;            color = Color.Black&#10;        )&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun DefaultPreview() {&#10;    InfoHub_telasTheme {&#10;        TelaProduto(&#10;            navController = rememberNavController(),&#10;            id = &quot;1&quot;&#10;        )&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.infohub_telas.telas&#10;&#10;import android.content.Context&#10;import androidx.compose.animation.animateColor&#10;import androidx.compose.animation.core.animateFloat&#10;import androidx.compose.animation.core.updateTransition&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.horizontalScroll&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.graphicsLayer&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextDecoration&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.navigation.NavController&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.infohub_telas.components.AnimatedScrollableBottomMenu&#10;import com.example.infohub_telas.components.rememberMenuVisibility&#10;import com.example.infohub_telas.ui.theme.InfoHub_telasTheme&#10;import com.example.infohub_telas.R&#10;import com.example.infohub_telas.navigation.Routes&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import com.example.infohub_telas.viewmodel.CarrinhoViewModel&#10;import com.example.infohub_telas.viewmodel.OperationUiState&#10;import android.widget.Toast&#10;import coil.compose.AsyncImage&#10;import coil.request.ImageRequest&#10;import com.example.infohub_telas.utils.AzureBlobUtils&#10;import com.example.infohub_telas.service.RetrofitFactory&#10;import com.example.infohub_telas.model.Produto&#10;import android.util.Log&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.launch&#10;import kotlinx.coroutines.withContext&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun TelaProduto(navController: NavController, id: String) {&#10;    val context = LocalContext.current&#10;    val prefs = context.getSharedPreferences(&quot;auth&quot;, Context.MODE_PRIVATE)&#10;    val token = prefs.getString(&quot;token&quot;, &quot;&quot;) ?: &quot;&quot;&#10;    val userId = prefs.getInt(&quot;user_id&quot;, 0)&#10;&#10;    val carrinhoViewModel: CarrinhoViewModel = viewModel()&#10;    val operationState by carrinhoViewModel.operationState.collectAsState()&#10;&#10;    // Estado para controlar rolagem e visibilidade do menu&#10;    val scrollState = rememberScrollState()&#10;    val isMenuVisible = scrollState.rememberMenuVisibility()&#10;&#10;    // Estados para carregar produto da API&#10;    var produto by remember { mutableStateOf&lt;Produto?&gt;(null) }&#10;    var isLoading by remember { mutableStateOf(true) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    val coroutineScope = rememberCoroutineScope()&#10;    val produtoApi = remember { RetrofitFactory().getInfoHub_ProdutoService() }&#10;&#10;    LaunchedEffect(operationState) {&#10;        when (val op = operationState) {&#10;            is OperationUiState.Success -&gt; {&#10;                Toast.makeText(context, op.message, Toast.LENGTH_SHORT).show()&#10;                carrinhoViewModel.resetOperationState()&#10;            }&#10;            is OperationUiState.Error -&gt; {&#10;                Toast.makeText(context, &quot;Erro: ${op.message}&quot;, Toast.LENGTH_LONG).show()&#10;                carrinhoViewModel.resetOperationState()&#10;            }&#10;            else -&gt; {}&#10;        }&#10;    }&#10;&#10;    // Buscar produto da API&#10;    LaunchedEffect(id) {&#10;        val idProduto = id.toIntOrNull()&#10;        if (idProduto == null) {&#10;            errorMessage = &quot;ID de produto inválido&quot;&#10;            isLoading = false&#10;            return@LaunchedEffect&#10;        }&#10;&#10;        Log.d(&quot;TelaProduto&quot;, &quot; Buscando produto com ID: $idProduto&quot;)&#10;        isLoading = true&#10;&#10;        coroutineScope.launch {&#10;            try {&#10;                val response = withContext(Dispatchers.IO) {&#10;                    produtoApi.buscarProdutoPorId(idProduto).execute()&#10;                }&#10;&#10;                if (response.isSuccessful) {&#10;                    produto = response.body()&#10;                    Log.d(&quot;TelaProduto&quot;, &quot;✅ Produto encontrado: ${produto?.nome}&quot;)&#10;                    Log.d(&quot;TelaProduto&quot;, &quot; Imagem do produto: ${produto?.imagem}&quot;)&#10;                } else {&#10;                    errorMessage = &quot;Erro ao carregar produto: ${response.code()}&quot;&#10;                    Log.e(&quot;TelaProduto&quot;, &quot;❌ Erro na API: ${response.code()}&quot;)&#10;                }&#10;            } catch (e: Exception) {&#10;                errorMessage = &quot;Erro de conexão: ${e.message}&quot;&#10;                Log.e(&quot;TelaProduto&quot;, &quot; Exceção ao buscar produto: ${e.message}&quot;, e)&#10;            } finally {&#10;                isLoading = false&#10;            }&#10;        }&#10;    }&#10;&#10;    // ID do produto vindo do parâmetro 'id' (converter para Int se possível)&#10;    val idProduto = id.toIntOrNull() ?: -1&#10;    // TODO: recuperar idEstabelecimento real associado ao produto&#10;    val idEstabelecimento = 1 // placeholder&#10;&#10;    fun adicionarAoCarrinho(quantidade: Int = 1) {&#10;        if (token.isBlank() || userId == 0) {&#10;            Toast.makeText(context, &quot;Faça login para adicionar ao carrinho&quot;, Toast.LENGTH_LONG).show()&#10;            return&#10;        }&#10;        if (idProduto == -1) {&#10;            Toast.makeText(context, &quot;Produto inválido&quot;, Toast.LENGTH_LONG).show()&#10;            return&#10;        }&#10;        carrinhoViewModel.adicionarItem(&#10;            token = token,&#10;            idUsuario = userId,&#10;            idProduto = idProduto,&#10;            idEstabelecimento = idEstabelecimento,&#10;            quantidade = quantidade&#10;        )&#10;    }&#10;&#10;    Scaffold(&#10;        topBar = { TopBarPromocao() }&#10;    ) { paddingValues -&gt;&#10;        Box(modifier = Modifier.fillMaxSize()) {&#10;            Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Color(0xFFF5F5F5))&#10;                .padding(paddingValues)&#10;                .verticalScroll(scrollState)&#10;                .padding(horizontal = 16.dp, vertical = 12.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            SearchBarPromocao()&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;            FilterChipsPromocao()&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;            if (isLoading) {&#10;                Column(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Center&#10;                ) {&#10;                    CircularProgressIndicator()&#10;                    Spacer(modifier = Modifier.height(16.dp))&#10;                    Text(&quot;Carregando produto...&quot;)&#10;                }&#10;            } else if (errorMessage != null) {&#10;                Column(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.Center&#10;                ) {&#10;                    Text(&#10;                        text = errorMessage ?: &quot;Erro desconhecido&quot;,&#10;                        color = MaterialTheme.colorScheme.error,&#10;                        style = MaterialTheme.typography.bodyLarge&#10;                    )&#10;                }&#10;            } else if (produto != null) {&#10;                ProductCardPromocao(&#10;                    produto = produto!!,&#10;                    adicionarAoCarrinho = { adicionarAoCarrinho() },&#10;                    navController = navController,&#10;                    context = context,&#10;                    token = token,&#10;                    userId = userId,&#10;                    idProduto = idProduto,&#10;                    idEstabelecimento = idEstabelecimento,&#10;                    carrinhoViewModel = carrinhoViewModel&#10;                )&#10;            }&#10;            Spacer(modifier = Modifier.height(80.dp))&#10;        } // Fecha a Column&#10;&#10;        // Menu inferior animado&#10;        Box(modifier = Modifier.align(Alignment.BottomCenter)) {&#10;            AnimatedScrollableBottomMenu(&#10;                navController = navController,&#10;                isAdmin = false,&#10;                isVisible = isMenuVisible&#10;            )&#10;        }&#10;        } // Fecha o Box principal&#10;    } // Fecha o Scaffold&#10;} // Fecha a função TelaProduto&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun TopBarPromocao() {&#10;    TopAppBar(&#10;        title = { },&#10;        navigationIcon = {&#10;            IconButton(onClick = { /* TODO: Voltar */ }) {&#10;                Icon(&#10;                    painter = painterResource(id = R.drawable.sacola),&#10;                    contentDescription = &quot;Voltar&quot;,&#10;                    tint = Color.White,&#10;                    modifier = Modifier.size(28.dp)&#10;                )&#10;            }&#10;        },&#10;        colors = TopAppBarDefaults.topAppBarColors(&#10;            containerColor = Color(0xFFFFA726)&#10;        )&#10;    )&#10;}&#10;&#10;@Composable&#10;fun SearchBarPromocao() {&#10;    var text by remember { mutableStateOf(&quot;&quot;) }&#10;    OutlinedTextField(&#10;        value = text,&#10;        onValueChange = { text = it },&#10;        placeholder = { Text(&quot;Pesquisar&quot;, color = Color.Gray) },&#10;        leadingIcon = { Icon(Icons.Default.Search, contentDescription = null, tint = Color.Gray) },&#10;        trailingIcon = {&#10;            IconButton(onClick = { /* TODO: Ação de busca por voz */ }) {&#10;                Icon(painter = painterResource(id = R.drawable.microfone_loc), contentDescription = &quot;Busca por voz&quot;, tint = Color.Gray)&#10;            }&#10;        },&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(56.dp),&#10;        shape = RoundedCornerShape(30.dp)&#10;    )&#10;}&#10;&#10;@Composable&#10;fun FilterChipsPromocao() {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .horizontalScroll(rememberScrollState()),&#10;        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;    ) {&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Promoções&quot;, color = Color.White, fontWeight = FontWeight.Medium, fontSize = 13.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color(0xFFFFA726)&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Hortifrúti&quot;, color = Color(0xFFFFA726), fontWeight = FontWeight.Medium, fontSize = 13.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color.White&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Carne&quot;, color = Color(0xFFFFA726), fontWeight = FontWeight.Medium, fontSize = 13.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color.White&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;        AssistChip(&#10;            onClick = { /* TODO */ },&#10;            border = BorderStroke(1.dp, color = Color(0xFFFFA726)),&#10;            label = { Text(&quot;Bebidas&quot;, color = Color(0xFFFFA726), fontWeight = FontWeight.Medium, fontSize = 12.sp, maxLines = 1) },&#10;            colors = AssistChipDefaults.assistChipColors(&#10;                containerColor = Color.White&#10;            ),&#10;            modifier = Modifier.height(36.dp)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProductCardPromocao(&#10;    produto: Produto,&#10;    adicionarAoCarrinho: () -&gt; Unit,&#10;    navController: NavController,&#10;    context: android.content.Context,&#10;    token: String,&#10;    userId: Int,&#10;    idProduto: Int,&#10;    idEstabelecimento: Int,&#10;    carrinhoViewModel: CarrinhoViewModel&#10;) {&#10;    // Obter URL da imagem do Azure&#10;    val imagemUrl = AzureBlobUtils.getImageUrl(produto.imagem)&#10;        ?: AzureBlobUtils.getPlaceholderImageUrl()&#10;&#10;    // Calcular desconto se houver promoção&#10;    val precoOriginal = produto.preco&#10;    val precoPromocional = produto.promocao?.precoPromocional ?: precoOriginal&#10;    val desconto = if (precoPromocional &lt; precoOriginal) {&#10;        ((precoOriginal - precoPromocional) / precoOriginal * 100).toInt()&#10;    } else {&#10;        0&#10;    }&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White),&#10;        elevation = CardDefaults.cardElevation(&#10;            defaultElevation = 4.dp&#10;        )&#10;    ) {&#10;        Column(&#10;            modifier = Modifier.padding(16.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            Box(modifier = Modifier.fillMaxWidth()) {&#10;                Surface(&#10;                    color = Color(0xFF4CAF50),&#10;                    shape = RoundedCornerShape(topStart = 8.dp, bottomEnd = 8.dp)&#10;                ) {&#10;                    Text(&#10;                        &quot;Oferta&quot;,&#10;                        color = Color.White,&#10;                        fontSize = 12.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        modifier = Modifier.padding(horizontal = 12.dp, vertical = 6.dp)&#10;                    )&#10;                }&#10;                IconButton(&#10;                    onClick = { /* TODO: Ação de favoritar */ },&#10;                    modifier = Modifier.align(Alignment.TopEnd)&#10;                ) {&#10;                    Icon(&#10;                        Icons.Default.FavoriteBorder,&#10;                        contentDescription = &quot;Favoritar&quot;,&#10;                        tint = Color(0xFFFFA726),&#10;                        modifier = Modifier.size(28.dp)&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Imagem do produto&#10;            Box(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(250.dp),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                AsyncImage(&#10;                    model = ImageRequest.Builder(context)&#10;                        .data(imagemUrl)&#10;                        .crossfade(true)&#10;                        .build(),&#10;                    contentDescription = produto.nome,&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(250.dp)&#10;                        .clip(RoundedCornerShape(12.dp)),&#10;                    contentScale = ContentScale.Crop&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Mostrar desconto e preço original apenas se houver promoção&#10;            if (desconto &gt; 0) {&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically,&#10;                    horizontalArrangement = Arrangement.Center&#10;                ) {&#10;                    Surface(&#10;                        color = Color(0xFFFFE0B2),&#10;                        shape = RoundedCornerShape(4.dp)&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;-$desconto%&quot;,&#10;                            modifier = Modifier.padding(horizontal = 8.dp, vertical = 4.dp),&#10;                            color = Color(0xFFFFA726),&#10;                            fontSize = 12.sp,&#10;                            fontWeight = FontWeight.Bold&#10;                        )&#10;                    }&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&#10;                        text = &quot;R$ %.2f&quot;.format(precoOriginal),&#10;                        color = Color.Gray,&#10;                        textDecoration = TextDecoration.LineThrough,&#10;                        fontSize = 14.sp&#10;                    )&#10;                }&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;            }&#10;&#10;            // Preço atual&#10;            Text(&#10;                &quot;R$ %.2f&quot;.format(precoPromocional),&#10;                fontSize = 32.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = if (desconto &gt; 0) Color(0xFF4CAF50) else Color(0xFFFFA726)&#10;            )&#10;&#10;            // Nome do produto&#10;            Text(&#10;                produto.nome,&#10;                color = Color.Gray,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Medium,&#10;                modifier = Modifier.padding(horizontal = 16.dp)&#10;            )&#10;&#10;            // Descrição do produto&#10;            if (!produto.descricao.isNullOrBlank()) {&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;                Text(&#10;                    produto.descricao,&#10;                    color = Color.Gray,&#10;                    fontSize = 13.sp,&#10;                    modifier = Modifier.padding(horizontal = 16.dp)&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(20.dp))&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceEvenly&#10;            ) {&#10;                // Botão Lista de Compras&#10;                Button(&#10;                    onClick = {&#10;                        // TODO: Implementar funcionalidade de Lista de Compras&#10;                        Toast.makeText(context, &quot;Lista de Compras - Em breve!&quot;, Toast.LENGTH_SHORT).show()&#10;                    },&#10;                    colors = ButtonDefaults.buttonColors(containerColor = Color(0xFFFFA726)),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    modifier = Modifier.size(70.dp, 48.dp)&#10;                ) {&#10;                    Icon(&#10;                        painter = painterResource(id = R.drawable.lista),&#10;                        contentDescription = &quot;Adicionar à lista&quot;,&#10;                        tint = Color.White,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;                // Botão Chat IA&#10;                Button(&#10;                    onClick = {&#10;                        navController.navigate(Routes.CHAT_PRECOS)&#10;                    },&#10;                    colors = ButtonDefaults.buttonColors(containerColor = Color(0xFFFFA726)),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    modifier = Modifier.size(70.dp, 48.dp)&#10;                ) {&#10;                    Icon(&#10;                        painter = painterResource(id = R.drawable.iabranca),&#10;                        contentDescription = &quot;Consultar IA&quot;,&#10;                        tint = Color.White,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;                // Botão Adicionar ao Carrinho&#10;                Button(&#10;                    onClick = { adicionarAoCarrinho() },&#10;                    colors = ButtonDefaults.buttonColors(containerColor = Color(0xFFFFA726)),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    modifier = Modifier.size(70.dp, 48.dp)&#10;                ) {&#10;                    Icon(&#10;                        painter = painterResource(id = R.drawable.sacola),&#10;                        contentDescription = &quot;Adicionar ao carrinho&quot;,&#10;                        tint = Color.White,&#10;                        modifier = Modifier.size(24.dp)&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Botão Comprar Agora - Adiciona ao carrinho e navega&#10;            Button(&#10;                onClick = {&#10;                    if (token.isBlank() || userId == 0) {&#10;                        Toast.makeText(context, &quot;Faça login para comprar&quot;, Toast.LENGTH_LONG).show()&#10;                        return@Button&#10;                    }&#10;                    if (idProduto == -1) {&#10;                        Toast.makeText(context, &quot;Produto inválido&quot;, Toast.LENGTH_LONG).show()&#10;                        return@Button&#10;                    }&#10;                    // Adiciona ao carrinho e navega para o carrinho&#10;                    carrinhoViewModel.adicionarItem(&#10;                        token = token,&#10;                        idUsuario = userId,&#10;                        idProduto = idProduto,&#10;                        idEstabelecimento = idEstabelecimento,&#10;                        quantidade = 1&#10;                    )&#10;                    // Navega para o carrinho após adicionar&#10;                    navController.navigate(Routes.CARRINHO)&#10;                },&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(50.dp)&#10;                    .padding(horizontal = 32.dp),&#10;                colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF4CAF50)),&#10;                shape = RoundedCornerShape(12.dp)&#10;            ) {&#10;                Text(&#10;                    &quot;COMPRAR AGORA&quot;,&#10;                    color = Color.White,&#10;                    fontWeight = FontWeight.Bold,&#10;                    fontSize = 14.sp&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomBarPromocao() {&#10;    Surface(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        color = Color.Transparent&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 16.dp, vertical = 8.dp)&#10;        ) {&#10;            // Barra &quot;Ver carrinho&quot;&#10;            Surface(&#10;                color = Color(0xFFFFA726),&#10;                shape = RoundedCornerShape(topStart = 16.dp, topEnd = 16.dp),&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                Row(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(horizontal = 20.dp, vertical = 12.dp),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Row(verticalAlignment = Alignment.CenterVertically) {&#10;                        Icon(&#10;                            painter = painterResource(id = R.drawable.sacola),&#10;                            contentDescription = &quot;Carrinho&quot;,&#10;                            tint = Color.White,&#10;                            modifier = Modifier.size(20.dp)&#10;                        )&#10;                        Spacer(modifier = Modifier.width(10.dp))&#10;                        Text(&#10;                            text = &quot;Ver carrinho&quot;,&#10;                            color = Color.White,&#10;                            fontSize = 15.sp,&#10;                            fontWeight = FontWeight.Medium&#10;                        )&#10;                    }&#10;                    Text(&#10;                        text = &quot;R$ 0,00&quot;,&#10;                        color = Color.White,&#10;                        fontSize = 15.sp,&#10;                        fontWeight = FontWeight.Medium&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Barra de navegação&#10;            Surface(&#10;                color = Color.White,&#10;                shape = RoundedCornerShape(bottomStart = 16.dp, bottomEnd = 16.dp),&#10;                shadowElevation = 8.dp,&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                var selectedIndex by remember { mutableStateOf(1) }&#10;                val items = listOf(&#10;                    &quot;Início&quot; to R.drawable.inicio,&#10;                    &quot;Promoções&quot; to R.drawable.promocoes,&#10;                    &quot;Localização&quot; to R.drawable.local,&#10;                    &quot;InfoCash&quot; to R.drawable.dinheiro,&#10;                    &quot;Meu Perfil&quot; to R.drawable.perfil_icon&#10;                )&#10;&#10;                Row(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(vertical = 8.dp, horizontal = 8.dp),&#10;                    horizontalArrangement = Arrangement.SpaceAround,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    items.forEachIndexed { index, (label, icon) -&gt;&#10;                        BottomNavigationItemAnimated(&#10;                            label = label,&#10;                            icon = icon,&#10;                            selected = index == selectedIndex,&#10;                            onClick = { selectedIndex = index }&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomNavigationItemAnimated(&#10;    label: String,&#10;    icon: Int,&#10;    selected: Boolean,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    val transition = updateTransition(targetState = selected, label = &quot;navTransition&quot;)&#10;    val circleScale by transition.animateFloat(label = &quot;circleScale&quot;) { if (it) 1f else 0f }&#10;    val iconColor by transition.animateColor(label = &quot;iconColor&quot;) { isSelected -&gt;&#10;        if (isSelected) Color.White else Color(0xFFFFA726)&#10;    }&#10;&#10;    Column(&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        modifier = Modifier&#10;            .clickable { onClick() }&#10;            .padding(vertical = 4.dp)&#10;    ) {&#10;        Box(&#10;            contentAlignment = Alignment.Center,&#10;            modifier = Modifier.size(48.dp)&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .matchParentSize()&#10;                    .graphicsLayer {&#10;                        scaleX = circleScale&#10;                        scaleY = circleScale&#10;                    }&#10;                    .background(&#10;                        color = Color(0xFFFFA726),&#10;                        shape = CircleShape&#10;                    )&#10;            )&#10;            Icon(&#10;                painter = painterResource(id = icon),&#10;                contentDescription = label,&#10;                tint = iconColor,&#10;                modifier = Modifier.size(26.dp)&#10;            )&#10;        }&#10;        Text(&#10;            text = label,&#10;            fontSize = 11.sp,&#10;            fontWeight = if (selected) FontWeight.Bold else FontWeight.Normal,&#10;            color = Color.Black&#10;        )&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun DefaultPreview() {&#10;    InfoHub_telasTheme {&#10;        TelaProduto(&#10;            navController = rememberNavController(),&#10;            id = &quot;1&quot;&#10;        )&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>